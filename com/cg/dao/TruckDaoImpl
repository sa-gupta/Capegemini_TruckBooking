package com.cg.dao;

import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

import org.apache.log4j.Logger;

import com.cg.bean.BookingDetails;
import com.cg.bean.Truck;

public class TruckDaoImpl implements TruckDao {
	private int bookingId = 1100;
	private Map<Integer, BookingDetails> bookingDetailMap = new HashMap<>();
	Scanner scan = new Scanner(System.in);
	Logger logger = Logger.getLogger(TruckDao.class);

	public TruckDaoImpl() {

		truckMap.put(1000, new Truck("20 Ton Trailer", "Mumbai", "Delhi", 30000, 3));
		truckMap.put(2000, new Truck("20 Ton Trailer", "Delhi", "Mumbai", 30000, 2));
		truckMap.put(1001, new Truck("10 Ton Truck", "Mumbai", "Kolkota", 20000, 7));
		truckMap.put(2001, new Truck("10 Ton Truck", "Kolkota", "Mumbai", 20000, 2));
		truckMap.put(1002, new Truck("10 Ton Truck", "Mumbai", "Chennai", 18000, 7));
		truckMap.put(1003, new Truck("Mini Truck", "Mumbai", "Pune", 5000, 10));
		truckMap.put(1004, new Truck("Mini Truck", "Mumbai", "Ahmedabad", 7000, 10));
		truckMap.put(3005, new Truck("Tempo", "Pune", "Nasik", 4000, 6));
	}

	@Override
	public void showTruck() {
		for (Integer truckId : truckMap.keySet()) {
			System.out.println(truckId + "       " + truckMap.get(truckId));
		}
		logger.info("showTruck Method called");

	}

	public int createBooking(Truck tr, int truckId, int truckWant, String custId, String mobile, String dateStr) {
		bookingDetailMap.put(bookingId, new BookingDetails(custId, truckId,tr.getTruckType() ,mobile, dateStr,tr.getCharge()*(double)truckWant));
		tr.setAvailable(tr.getAvailable() - truckWant);
		return bookingId++;
	}

	@Override
	public void showBookingDetails() {
		for (Integer bookInteger : bookingDetailMap.keySet()) {
			System.out.println(bookInteger+"         "+bookingDetailMap.get(bookInteger));
		}
		
	}
}
